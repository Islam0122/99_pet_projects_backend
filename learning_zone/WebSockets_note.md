# WebSockets — конспект

## Что такое WebSocket
**WebSocket** — это протокол, который позволяет устанавливать **постоянное двустороннее соединение**
между клиентом (браузер, мобильное приложение) и сервером.

В отличие от HTTP:
- HTTP → запрос → ответ → соединение закрыто
- WebSocket → соединение открыто постоянно

Используется там, где нужны **мгновенные обновления**.

---

## Когда использовать WebSocket
- Чаты
- Онлайн-игры
- Уведомления в реальном времени
- Торговые биржи
- Трекинг (курьеры, такси)
- Live-дашборды

---

## Как работает WebSocket (кратко)
1. Клиент отправляет HTTP-запрос с `Upgrade: websocket`
2. Сервер подтверждает апгрейд
3. Соединение становится WebSocket
4. Клиент и сервер могут отправлять данные **в любое время**

---

## Отличие HTTP vs WebSocket

| HTTP | WebSocket |
|----|----|
| Однонаправленный | Двусторонний |
| Короткое соединение | Постоянное |
| Запрос → ответ | Сообщения в обе стороны |
| Медленно для real-time | Идеально для real-time |

---

## WebSocket vs Polling
**Polling**:
- Клиент постоянно спрашивает сервер
- Лишняя нагрузка

**WebSocket**:
- Сервер сам отправляет данные
- Экономия ресурсов

---

## Пример WebSocket (JavaScript)

### Клиент (браузер)
```js
const socket = new WebSocket("ws://localhost:8000/ws");

socket.onopen = () => {
  console.log("Соединение открыто");
  socket.send("Привет сервер");
};

socket.onmessage = (event) => {
  console.log("Сообщение:", event.data);
};

socket.onclose = () => {
  console.log("Соединение закрыто");
};